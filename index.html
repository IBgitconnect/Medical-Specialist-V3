<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Specialist Directory</title>
    <style>
        :root {
            --color-bg-primary: #fcfcf9;
            --color-surface: #fffffd;
            --color-text-primary: #13343b;
            --color-text-secondary: #626c71;
            --color-primary: #21808d;
            --color-primary-hover: #1d7480;
            --color-primary-active: #1a6873;
            --color-secondary: rgba(94, 82, 64, 0.12);
            --color-border: rgba(94, 82, 64, 0.2);
            --color-success: #21808d;
            --color-teal-bg: rgba(33, 128, 141, 0.08);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-bg-primary: #1f2121;
                --color-surface: #262828;
                --color-text-primary: #f5f5f5;
                --color-text-secondary: rgba(167, 169, 169, 0.7);
                --color-primary: #32b8c6;
                --color-primary-hover: #2da6b2;
                --color-primary-active: #299ea1;
                --color-secondary: rgba(119, 124, 124, 0.15);
                --color-border: rgba(119, 124, 124, 0.3);
                --color-success: #32b8c6;
                --color-teal-bg: rgba(50, 184, 198, 0.15);
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--color-bg-primary);
            color: var(--color-text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            background: var(--color-surface);
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--color-primary);
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--color-text-secondary);
            margin-bottom: 20px;
        }

        .mode-toggle {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .mode-btn {
            padding: 12px 24px;
            border: 2px solid var(--color-border);
            background: var(--color-surface);
            color: var(--color-text-primary);
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .mode-btn.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .mode-btn:hover:not(.active) {
            background: var(--color-secondary);
        }

        .section {
            background: var(--color-surface);
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .section.hidden {
            display: none;
        }

        h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--color-primary);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--color-text-primary);
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--color-bg-primary);
            color: var(--color-text-primary);
            transition: border-color 0.2s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        .required {
            color: #c01521;
        }

        button {
            background: var(--color-primary);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
        }

        button:hover {
            background: var(--color-primary-hover);
        }

        button:active {
            background: var(--color-primary-active);
        }

        .search-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .search-controls {
                grid-template-columns: 1fr;
            }
        }

        .results {
            margin-top: 30px;
        }

        .specialist-card {
            background: var(--color-teal-bg);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid var(--color-primary);
        }

        .specialist-name {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 8px;
        }

        .specialist-detail {
            display: flex;
            margin: 5px 0;
            color: var(--color-text-primary);
        }

        .detail-label {
            font-weight: 500;
            min-width: 120px;
            color: var(--color-text-secondary);
        }

        .tip-box {
            background: linear-gradient(135deg, var(--color-teal-bg), var(--color-secondary));
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--color-success);
        }

        .tip-title {
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .encouragement {
            background: var(--color-teal-bg);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            margin-top: 30px;
            border: 2px solid var(--color-primary);
        }

        .encouragement h3 {
            color: var(--color-primary);
            margin-bottom: 10px;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: var(--color-text-secondary);
        }

        .status-message {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .status-success {
            background: rgba(33, 128, 141, 0.15);
            color: var(--color-success);
            border: 1px solid var(--color-success);
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: var(--color-text-secondary);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-primary);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--color-text-secondary);
        }

        .footer {
            text-align: right;
            padding: 20px;
            margin-top: 40px;
        }

        .admin-link {
            background: transparent;
            color: var(--color-text-secondary);
            border: none;
            padding: 6px 10px;
            font-size: 0.85rem;
            opacity: 0.4;
            cursor: pointer;
            border-radius: 4px;
            transition: opacity 0.2s;
        }

        .admin-link:hover {
            opacity: 0.7;
            background: transparent;
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: var(--color-surface);
        }

        .admin-table th,
        .admin-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--color-border);
        }

        .admin-table th {
            background: var(--color-secondary);
            font-weight: 600;
            color: var(--color-primary);
        }

        .admin-table tr:hover {
            background: var(--color-teal-bg);
        }

        .search-status {
            padding: 10px;
            border-radius: 6px;
            margin: 5px 0;
            font-size: 0.9rem;
        }

        .status-searching {
            background: rgba(33, 128, 141, 0.1);
            color: var(--color-primary);
        }

        .status-found {
            background: rgba(33, 128, 141, 0.15);
            color: var(--color-success);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üè• Medical Specialist Directory</h1>
            <p class="subtitle">A collaborative directory for Australian medical professionals</p>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number" id="totalSpecialists">0</div>
                    <div class="stat-label">Specialists Listed</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalSpecialties">0</div>
                    <div class="stat-label">Specialties</div>
                </div>
            </div>
        </header>

        <div class="mode-toggle">
            <button class="mode-btn active" id="inputModeBtn">Add Specialist</button>
            <button class="mode-btn" id="searchModeBtn">Search Directory</button>
        </div>

        <!-- Input Mode -->
        <div class="section" id="inputMode">
            <h2>Add a New Specialist</h2>
            
            <div class="tip-box">
                <div class="tip-title">üí° Quick Tip</div>
                <p>Just enter the specialist's name and specialty, and we'll help find their contact details automatically! You can also add location details if you know them.</p>
            </div>

            <form id="specialistForm">
                <div class="form-group">
                    <label for="specialistName">Specialist Name <span class="required">*</span></label>
                    <input type="text" id="specialistName" placeholder="e.g., Dr. Sarah Johnson" required>
                </div>

                <div class="form-group">
                    <label for="specialty">Specialty <span class="required">*</span></label>
                    <select id="specialty" required>
                        <option value="">Select specialty...</option>
                        <option value="Addiction Medicine">Addiction Medicine</option>
                        <option value="Anaesthesia">Anaesthesia</option>
                        <option value="Cardiology">Cardiology</option>
                        <option value="Cardiothoracic Surgery">Cardiothoracic Surgery</option>
                        <option value="Clinical Genetics">Clinical Genetics</option>
                        <option value="Dermatology">Dermatology</option>
                        <option value="Emergency Medicine">Emergency Medicine</option>
                        <option value="Endocrinology">Endocrinology</option>
                        <option value="Gastroenterology">Gastroenterology</option>
                        <option value="General Surgery">General Surgery</option>
                        <option value="Geriatric Medicine">Geriatric Medicine</option>
                        <option value="Haematology">Haematology</option>
                        <option value="Immunology and Allergy">Immunology and Allergy</option>
                        <option value="Infectious Diseases">Infectious Diseases</option>
                        <option value="Intensive Care Medicine">Intensive Care Medicine</option>
                        <option value="Medical Oncology">Medical Oncology</option>
                        <option value="Nephrology">Nephrology</option>
                        <option value="Neurology">Neurology</option>
                        <option value="Neurosurgery">Neurosurgery</option>
                        <option value="Nuclear Medicine">Nuclear Medicine</option>
                        <option value="Obstetrics and Gynaecology">Obstetrics and Gynaecology</option>
                        <option value="Occupational Medicine">Occupational Medicine</option>
                        <option value="Ophthalmology">Ophthalmology</option>
                        <option value="Orthopaedic Surgery">Orthopaedic Surgery</option>
                        <option value="Otolaryngology (ENT)">Otolaryngology (ENT)</option>
                        <option value="Paediatrics">Paediatrics</option>
                        <option value="Pain Medicine">Pain Medicine</option>
                        <option value="Palliative Medicine">Palliative Medicine</option>
                        <option value="Pathology">Pathology</option>
                        <option value="Plastic Surgery">Plastic Surgery</option>
                        <option value="Psychiatry">Psychiatry</option>
                        <option value="Radiology">Radiology</option>
                        <option value="Radiation Oncology">Radiation Oncology</option>
                        <option value="Rehabilitation Medicine">Rehabilitation Medicine</option>
                        <option value="Respiratory Medicine">Respiratory Medicine</option>
                        <option value="Rheumatology">Rheumatology</option>
                        <option value="Sports Medicine">Sports Medicine</option>
                        <option value="Urology">Urology</option>
                        <option value="Vascular Surgery">Vascular Surgery</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="state">State/Territory <span class="required">*</span></label>
                        <select id="state" required>
                            <option value="">Select state/territory...</option>
                            <option value="NSW">New South Wales (NSW)</option>
                            <option value="VIC">Victoria (VIC)</option>
                            <option value="QLD">Queensland (QLD)</option>
                            <option value="WA">Western Australia (WA)</option>
                            <option value="SA">South Australia (SA)</option>
                            <option value="TAS">Tasmania (TAS)</option>
                            <option value="NT">Northern Territory (NT)</option>
                            <option value="ACT">Australian Capital Territory (ACT)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="city">City/Suburb (Optional)</label>
                        <input type="text" id="city" placeholder="e.g., Melbourne, Sydney, Brisbane">
                    </div>
                </div>

                <button type="submit">Add Specialist</button>
            </form>

            <div id="searchDetailsSection" class="section hidden" style="margin-top: 20px; background: var(--color-teal-bg); padding: 20px;">
                <h3 style="color: var(--color-primary); margin-bottom: 15px;">üîç Search for Contact Details</h3>
                <p style="margin-bottom: 15px;">Click below to automatically search for this specialist's contact information online.</p>
                <div id="lastAddedSpecialist" style="margin-bottom: 15px; padding: 15px; background: var(--color-surface); border-radius: 8px;"></div>
                <button type="button" id="searchDetailsBtn" style="margin-right: 10px;">Search for Details</button>
                <div id="searchProgress" class="hidden" style="margin-top: 15px; padding: 15px; background: var(--color-surface); border-radius: 8px;"></div>
            </div>

            <div class="encouragement">
                <h3>üôè Thank You for Contributing!</h3>
                <p>Every specialist you add helps fellow medical professionals provide better patient care. Your contribution makes a real difference to the medical community across Australia.</p>
                <div style="margin-top: 20px; text-align: center;">
                    <button class="admin-link" id="adminModeBtnInput" style="display: inline-block;">üîí</button>
                </div>
            </div>
        </div>

        <!-- Search Mode -->
        <div class="section hidden" id="searchMode">
            <h2>Search for Specialists</h2>
            
            <div class="tip-box">
                <div class="tip-title">üîç Search Tips</div>
                <p><strong>Option 1:</strong> Search by specialty + location (e.g., find all Cardiologists in Melbourne)<br>
                <strong>Option 2:</strong> Search by specialist's name (first name or surname)<br>
                <strong>Pro tip:</strong> You can use partial names - try "John" or "Smith"</p>
            </div>

            <div class="search-controls">
                <div class="form-group">
                    <label for="searchSpecialty">Search by Specialty</label>
                    <select id="searchSpecialty">
                        <option value="">All specialties...</option>
                        <option value="Addiction Medicine">Addiction Medicine</option>
                        <option value="Anaesthesia">Anaesthesia</option>
                        <option value="Cardiology">Cardiology</option>
                        <option value="Cardiothoracic Surgery">Cardiothoracic Surgery</option>
                        <option value="Clinical Genetics">Clinical Genetics</option>
                        <option value="Dermatology">Dermatology</option>
                        <option value="Emergency Medicine">Emergency Medicine</option>
                        <option value="Endocrinology">Endocrinology</option>
                        <option value="Gastroenterology">Gastroenterology</option>
                        <option value="General Surgery">General Surgery</option>
                        <option value="Geriatric Medicine">Geriatric Medicine</option>
                        <option value="Haematology">Haematology</option>
                        <option value="Immunology and Allergy">Immunology and Allergy</option>
                        <option value="Infectious Diseases">Infectious Diseases</option>
                        <option value="Intensive Care Medicine">Intensive Care Medicine</option>
                        <option value="Medical Oncology">Medical Oncology</option>
                        <option value="Nephrology">Nephrology</option>
                        <option value="Neurology">Neurology</option>
                        <option value="Neurosurgery">Neurosurgery</option>
                        <option value="Nuclear Medicine">Nuclear Medicine</option>
                        <option value="Obstetrics and Gynaecology">Obstetrics and Gynaecology</option>
                        <option value="Occupational Medicine">Occupational Medicine</option>
                        <option value="Ophthalmology">Ophthalmology</option>
                        <option value="Orthopaedic Surgery">Orthopaedic Surgery</option>
                        <option value="Otolaryngology (ENT)">Otolaryngology (ENT)</option>
                        <option value="Paediatrics">Paediatrics</option>
                        <option value="Pain Medicine">Pain Medicine</option>
                        <option value="Palliative Medicine">Palliative Medicine</option>
                        <option value="Pathology">Pathology</option>
                        <option value="Plastic Surgery">Plastic Surgery</option>
                        <option value="Psychiatry">Psychiatry</option>
                        <option value="Radiology">Radiology</option>
                        <option value="Radiation Oncology">Radiation Oncology</option>
                        <option value="Rehabilitation Medicine">Rehabilitation Medicine</option>
                        <option value="Respiratory Medicine">Respiratory Medicine</option>
                        <option value="Rheumatology">Rheumatology</option>
                        <option value="Sports Medicine">Sports Medicine</option>
                        <option value="Urology">Urology</option>
                        <option value="Vascular Surgery">Vascular Surgery</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="searchLocation">Location (City/Suburb)</label>
                    <input type="text" id="searchLocation" placeholder="e.g., Melbourne, Parramatta">
                </div>

                <div class="form-group">
                    <label for="searchName">Or Search by Name</label>
                    <input type="text" id="searchName" placeholder="First name or surname">
                </div>

                <div class="form-group">
                    <button type="button" id="searchBtn">Search</button>
                </div>
            </div>

            <div class="results" id="searchResults"></div>
        </div>

        <footer class="footer">
            <button class="admin-link" id="adminModeBtn">üîí</button>
        </footer>

        <!-- Admin Mode -->
        <div class="section hidden" id="adminMode">
            <h2>üîê Admin: Full Database View</h2>
            
            <div class="tip-box">
                <div class="tip-title">üîí Secure Access</div>
                <p>This view is password-protected and shows all specialist records in the database.</p>
            </div>

            <div id="adminLogin">
                <div class="form-group">
                    <label for="adminPassword">Enter Admin Password</label>
                    <input type="password" id="adminPassword" placeholder="Enter password">
                </div>
                <button type="button" id="adminLoginBtn">Access Database</button>
                <div id="loginError" class="hidden" style="margin-top: 10px; color: #c01521; font-weight: 500;"></div>
            </div>

            <div id="adminContent" class="hidden">
                <div style="margin-bottom: 20px;">
                    <button type="button" id="exportBtn" style="margin-right: 10px;">Export Database (JSON)</button>
                    <button type="button" id="refreshAdminBtn">Refresh View</button>
                </div>
                <div id="adminResults"></div>
            </div>
        </div>
    </div>

    <script>
        // In-memory database (in a real app, this would be a backend database)
        let specialistsDatabase = [];

        // Load data from localStorage
        function loadDatabase() {
            try {
                const stored = localStorage.getItem('specialistsDatabase');
                if (stored) {
                    specialistsDatabase = JSON.parse(stored);
                }
            } catch (e) {
                console.log('Starting with empty database');
            }
            updateStats();
        }

        // Save data to localStorage
        function saveDatabase() {
            try {
                localStorage.setItem('specialistsDatabase', JSON.stringify(specialistsDatabase));
            } catch (e) {
                console.error('Failed to save database:', e);
            }
        }

        // Update statistics
        function updateStats() {
            const totalSpecialists = specialistsDatabase.length;
            const uniqueSpecialties = new Set(specialistsDatabase.map(s => s.specialty)).size;
            
            document.getElementById('totalSpecialists').textContent = totalSpecialists;
            document.getElementById('totalSpecialties').textContent = uniqueSpecialties;
        }

        // Mode switching
        document.getElementById('inputModeBtn').addEventListener('click', () => {
            document.getElementById('inputMode').classList.remove('hidden');
            document.getElementById('searchMode').classList.add('hidden');
            document.getElementById('adminMode').classList.add('hidden');
            document.getElementById('inputModeBtn').classList.add('active');
            document.getElementById('searchModeBtn').classList.remove('active');
            document.getElementById('adminModeBtn').classList.remove('active');
        });

        document.getElementById('searchModeBtn').addEventListener('click', () => {
            document.getElementById('searchMode').classList.remove('hidden');
            document.getElementById('inputMode').classList.add('hidden');
            document.getElementById('adminMode').classList.add('hidden');
            document.getElementById('searchModeBtn').classList.add('active');
            document.getElementById('inputModeBtn').classList.remove('active');
            document.getElementById('adminModeBtn').classList.remove('active');
        });

        // Admin mode button handlers (both footer and input mode)
        const adminButtons = [document.getElementById('adminModeBtn'), document.getElementById('adminModeBtnInput')];
        adminButtons.forEach(btn => {
            if (btn) {
                btn.addEventListener('click', () => {
                    document.getElementById('adminMode').classList.remove('hidden');
                    document.getElementById('inputMode').classList.add('hidden');
                    document.getElementById('searchMode').classList.add('hidden');
                    document.getElementById('inputModeBtn').classList.remove('active');
                    document.getElementById('searchModeBtn').classList.remove('active');
                });
            }
        });

        // Add specialist form submission
        document.getElementById('specialistForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const name = document.getElementById('specialistName').value.trim();
            const specialty = document.getElementById('specialty').value;
            const state = document.getElementById('state').value;
            const city = document.getElementById('city').value.trim();

            if (!name || !specialty || !state) {
                alert('Please fill in the required fields (Name, Specialty, and State/Territory)');
                return;
            }

            // Create specialist entry
            const specialist = {
                id: Date.now(),
                name: name,
                specialty: specialty,
                state: state,
                city: city,
                locations: city && state ? `${city}, ${state}` : (city || state || 'Location not specified'),
                phone: 'Contact via clinic',
                email: 'Available upon request',
                dateAdded: new Date().toISOString()
            };

            // Add to database
            specialistsDatabase.push(specialist);
            saveDatabase();
            updateStats();

            // Show search details section
            const searchSection = document.getElementById('searchDetailsSection');
            searchSection.classList.remove('hidden');
            document.getElementById('lastAddedSpecialist').innerHTML = `
                <strong>Last Added:</strong> ${specialist.name} - ${specialist.specialty}, ${specialist.locations}
            `;
            
            // Store last added specialist ID for search
            window.lastAddedSpecialistId = specialist.id;

            // Show success message
            const form = document.getElementById('specialistForm');
            const successMsg = document.createElement('div');
            successMsg.className = 'status-message status-success';
            successMsg.textContent = `‚úì Successfully added ${name} to the directory! Thank you for your contribution.`;
            form.insertAdjacentElement('afterend', successMsg);

            // Clear form
            form.reset();

            // Remove success message after 5 seconds
            setTimeout(() => {
                successMsg.remove();
            }, 5000);

            // Note about automatic lookup
            console.log('In production: Would search for additional details via API for:', name, specialty, city, state);
        });

        // Search functionality
        document.getElementById('searchBtn').addEventListener('click', () => {
            const specialty = document.getElementById('searchSpecialty').value;
            const location = document.getElementById('searchLocation').value.trim().toLowerCase();
            const name = document.getElementById('searchName').value.trim().toLowerCase();

            let results = specialistsDatabase;

            // Filter by specialty
            if (specialty) {
                results = results.filter(s => s.specialty === specialty);
            }

            // Filter by location
            if (location) {
                results = results.filter(s => {
                    const locStr = `${s.city} ${s.state}`.toLowerCase();
                    return locStr.includes(location);
                });
            }

            // Filter by name
            if (name) {
                results = results.filter(s => {
                    return s.name.toLowerCase().includes(name);
                });
            }

            displayResults(results);
        });

        // Display search results
        function displayResults(results) {
            const resultsDiv = document.getElementById('searchResults');
            
            if (results.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="no-results">
                        <h3>No specialists found</h3>
                        <p>Try adjusting your search criteria or consider adding this specialist to our directory!</p>
                    </div>
                `;
                return;
            }

            let html = `<h3>Found ${results.length} specialist${results.length > 1 ? 's' : ''}</h3>`;
            
            results.forEach(specialist => {
                html += `
                    <div class="specialist-card">
                        <div class="specialist-name">${specialist.name}</div>
                        <div class="specialist-detail">
                            <span class="detail-label">Specialty:</span>
                            <span>${specialist.specialty}</span>
                        </div>
                        <div class="specialist-detail">
                            <span class="detail-label">Location:</span>
                            <span>${specialist.locations}</span>
                        </div>
                        <div class="specialist-detail">
                            <span class="detail-label">Phone:</span>
                            <span>${specialist.phone}</span>
                        </div>
                        <div class="specialist-detail">
                            <span class="detail-label">Email:</span>
                            <span>${specialist.email}</span>
                        </div>
                    </div>
                `;
            });

            resultsDiv.innerHTML = html;
        }

        // Add some sample data for demonstration
        const sampleData = [
            {
                id: 1,
                name: 'Dr. Emily Chen',
                specialty: 'Cardiology',
                state: 'VIC',
                city: 'Melbourne',
                locations: 'Melbourne, VIC',
                phone: '(03) 9123 4567',
                email: 'e.chen@heartcare.com.au',
                dateAdded: new Date().toISOString()
            },
            {
                id: 2,
                name: 'Dr. James Wilson',
                specialty: 'Orthopaedic Surgery',
                state: 'NSW',
                city: 'Sydney',
                locations: 'Sydney, NSW',
                phone: '(02) 9876 5432',
                email: 'j.wilson@boneclinic.com.au',
                dateAdded: new Date().toISOString()
            },
            {
                id: 3,
                name: 'Dr. Sarah Martinez',
                specialty: 'Dermatology',
                state: 'QLD',
                city: 'Brisbane',
                locations: 'Brisbane, QLD',
                phone: '(07) 3456 7890',
                email: 'sarah.m@skinclinic.com.au',
                dateAdded: new Date().toISOString()
            }
        ];

        // Initialize with sample data
        specialistsDatabase = sampleData;
        loadDatabase();

        // Search for specialist details functionality
        document.getElementById('searchDetailsBtn').addEventListener('click', async () => {
            const specialistId = window.lastAddedSpecialistId;
            if (!specialistId) return;

            const specialist = specialistsDatabase.find(s => s.id === specialistId);
            if (!specialist) return;

            const progressDiv = document.getElementById('searchProgress');
            progressDiv.classList.remove('hidden');
            progressDiv.innerHTML = '<div class="search-status status-searching">üîç Searching for contact details...</div>';

            // Simulate API search (in production, this would call Perplexity API)
            await new Promise(resolve => setTimeout(resolve, 2000));

            // Update specialist with found details
            const searchQuery = `${specialist.name} ${specialist.specialty} ${specialist.city} ${specialist.state} contact phone email address`;
            
            progressDiv.innerHTML += `
                <div class="search-status status-found">‚úì Search completed!</div>
                <div style="margin-top: 10px; padding: 10px; background: var(--color-surface); border-radius: 6px;">
                    <p><strong>Note:</strong> In production, this would search the web for:</p>
                    <p style="font-style: italic; color: var(--color-text-secondary);">"${searchQuery}"</p>
                    <p style="margin-top: 10px;">The system would automatically populate:</p>
                    <ul style="margin-left: 20px; margin-top: 5px;">
                        <li>Office address(es)</li>
                        <li>Phone number(s)</li>
                        <li>Email address(es)</li>
                    </ul>
                </div>
            `;

            // In production, update the database with found information
            specialist.phone = '(03) 9XXX XXXX (to be searched)';
            specialist.email = 'contact@clinic.com.au (to be searched)';
            specialist.addresses = 'Office addresses to be searched';
            saveDatabase();
        });

        // Admin authentication
        const ADMIN_PASSWORD = 'MedSpec2026!'; // Change this to your secure password

        document.getElementById('adminLoginBtn').addEventListener('click', () => {
            const password = document.getElementById('adminPassword').value;
            const errorDiv = document.getElementById('loginError');

            if (password === ADMIN_PASSWORD) {
                document.getElementById('adminLogin').classList.add('hidden');
                document.getElementById('adminContent').classList.remove('hidden');
                errorDiv.classList.add('hidden');
                displayAdminDatabase();
            } else {
                errorDiv.textContent = '‚ùå Incorrect password. Access denied.';
                errorDiv.classList.remove('hidden');
            }
        });

        // Display full database in admin view
        function displayAdminDatabase() {
            const adminResults = document.getElementById('adminResults');
            
            if (specialistsDatabase.length === 0) {
                adminResults.innerHTML = '<p class="no-results">No specialists in database yet.</p>';
                return;
            }

            let html = `
                <h3>Total Records: ${specialistsDatabase.length}</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Specialty</th>
                            <th>Location</th>
                            <th>Phone</th>
                            <th>Email</th>
                            <th>Date Added</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            specialistsDatabase.forEach(specialist => {
                const dateAdded = new Date(specialist.dateAdded).toLocaleDateString('en-AU');
                html += `
                    <tr>
                        <td>${specialist.id}</td>
                        <td>${specialist.name}</td>
                        <td>${specialist.specialty}</td>
                        <td>${specialist.locations}</td>
                        <td>${specialist.phone}</td>
                        <td>${specialist.email}</td>
                        <td>${dateAdded}</td>
                    </tr>
                `;
            });

            html += `
                    </tbody>
                </table>
            `;

            adminResults.innerHTML = html;
        }

        // Refresh admin view
        document.getElementById('refreshAdminBtn').addEventListener('click', () => {
            displayAdminDatabase();
        });

        // Export database
        document.getElementById('exportBtn').addEventListener('click', () => {
            const dataStr = JSON.stringify(specialistsDatabase, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `specialists-database-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
        });
    </script>
</body>
</html>
